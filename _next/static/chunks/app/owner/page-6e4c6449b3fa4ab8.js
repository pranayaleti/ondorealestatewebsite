(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6154],{6707:(e,s,t)=>{"use strict";t.d(s,{A:()=>u,AuthProvider:()=>x});var r=t(95155),a=t(12115),n=t(20063),l=t(79733),i=t(61465);let c=(0,a.createContext)(void 0),d="ondo_auth_token",m="ondo_user_data",o=new i.v$(5,3e5);function x(e){let{children:s}=e,[t,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),j=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=i.Bu.getItem(d),s=i.Bu.getItem(m);if(e&&s)try{let t=JSON.parse(s);await f(e)?x({...t,token:e}):(i.Bu.removeItem(d),i.Bu.removeItem(m))}catch(e){i.Bu.removeItem(d),i.Bu.removeItem(m)}h(!1)})()},[]);let f=async e=>{try{let s=await fetch((0,l.E)("/api/auth/verify"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!s.ok)return await s.json().catch(()=>({})),!1;return!0}catch(e){return!1}},p=async()=>{let e=i.Bu.getItem(d);if(!e)return!1;try{let s=await fetch((0,l.E)("/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();if(e.token){let s=i.Bu.setItem(d,e.token);return s&&t&&x({...t,token:e.token}),s}}return!1}catch(e){return!1}},N=async(e,s,t)=>{h(!0);try{if(!o.isAllowed("login-attempts"))return h(!1),{success:!1,error:"Too many login attempts. Please wait 5 minutes before trying again."};let r=(0,i.o2)(e);if(!r||!s||!t)return h(!1),{success:!1,error:"Email, password, and role are required"};if(!(0,i.B9)(r))return h(!1),{success:!1,error:"Please enter a valid email address"};if(s.length<8)return h(!1),{success:!1,error:"Password must be at least 8 characters long"};let a=await fetch((0,l.E)("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.toLowerCase(),password:s,role:t})}),n=await a.json();if(!a.ok){h(!1);let e=(null==n?void 0:n.message)||(null==n?void 0:n.error)||"Login failed (".concat(a.status,")");return{success:!1,error:e}}if(!n.token||!n.user)return h(!1),{success:!1,error:"Invalid response from server"};{let e=i.Bu.setItem(d,n.token),s=i.Bu.setItem(m,JSON.stringify(n.user));if(!e||!s)return h(!1),{success:!1,error:"Failed to securely store session data"};return x({...n.user,token:n.token}),h(!1),o.reset("login-attempts"),{success:!0}}}catch(e){return h(!1),{success:!1,error:e instanceof Error?e.message:"Network error occurred"}}};return(0,r.jsx)(c.Provider,{value:{user:t,login:N,logout:()=>{x(null),i.Bu.removeItem(d),i.Bu.removeItem(m),j.push("/")},isLoading:u,refreshToken:p},children:s})}let u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},55850:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var r=t(95155),a=t(12115),n=t(77450),l=t(25016);let i=a.forwardRef((e,s)=>{let{className:t,value:a,indicatorClassName:i,...c}=e;return(0,r.jsx)(n.bL,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...c,children:(0,r.jsx)(n.C1,{className:(0,l.cn)("h-full w-full flex-1 bg-primary transition-all",i),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=n.bL.displayName},61316:(e,s,t)=>{Promise.resolve().then(t.bind(t,65578))},61465:(e,s,t)=>{"use strict";function r(e){return"string"!=typeof e?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"").replace(/on\w+="[^"]*"/gi,"").replace(/on\w+='[^']*'/gi,"").trim()}function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function n(e){return/^\d{5}(-\d{4})?$/.test(e.trim())}t.d(s,{B9:()=>a,Bu:()=>l,TV:()=>n,o2:()=>r,v$:()=>i});class l{static setItem(e,s){try{if(!window.localStorage)return!1;let t="__storage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),localStorage.setItem(e,s),!0}catch(e){return!1}}static getItem(e){try{if(!window.localStorage)return null;return localStorage.getItem(e)}catch(e){return null}}static removeItem(e){try{if(!window.localStorage)return!1;return localStorage.removeItem(e),!0}catch(e){return!1}}}class i{isAllowed(e){let s=Date.now(),t=(this.attempts.get(e)||[]).filter(e=>s-e<this.windowMs);return!(t.length>=this.maxAttempts)&&(t.push(s),this.attempts.set(e,t),!0)}reset(e){this.attempts.delete(e)}constructor(e=5,s=6e4){this.attempts=new Map,this.maxAttempts=e,this.windowMs=s}}},65578:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(95155),a=t(12115),n=t(83209),l=t(71871),i=t(91761),c=t(56835),d=t(91169),m=t(16485),o=t(97003),x=t(55850),u=t(68122),h=t(52619),j=t.n(h),f=t(30224),p=t(6707),N=t(11559),v=t(9852),w=t(40932);function g(){let[e,s]=(0,a.useState)(!0),[t,h]=(0,a.useState)(0),{user:g}=(0,p.A)();return(0,a.useEffect)(()=>{let e=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>h(85),500);return()=>clearTimeout(e)},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:p-8",children:[(0,r.jsx)(N.default,{title:"Owner Dashboard | Ondo Real Estate",description:"Track revenue, occupancy, maintenance, and tenant activity in the Ondo owner portal.",pathname:"/owner",image:"".concat(w.W6,"/property-manager-meeting.png"),jsonLd:[(0,v.FG)([{name:"Home",url:w.W6},{name:"Owner",url:"".concat(w.W6,"/owner")}]),(0,v.XD)({name:"Owner Dashboard",url:"".concat(w.W6,"/owner"),description:"Owner portal overview of revenue, occupancy, maintenance, and tenant activity."})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(f.Qp,{className:"mb-4",children:(0,r.jsxs)(f.AB,{children:[(0,r.jsx)(f.J5,{children:(0,r.jsx)(f.w1,{href:"/",children:"Home"})}),(0,r.jsx)(f.tH,{}),(0,r.jsx)(f.J5,{children:(0,r.jsx)(f.tJ,{children:"Owner Dashboard"})})]})})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome, ",(null==g?void 0:g.name)||"Owner"]}),(0,r.jsx)("p",{className:"text-foreground/70",children:"Manage your properties and tenants"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"text-sm text-foreground/70",children:"Last login: Today, 10:15 AM"})})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Properties"}),(0,r.jsx)(l.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(u.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"7"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"2 single-family, 5 apartments"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Monthly Revenue"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(u.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"$8,750.00"}),(0,r.jsxs)("p",{className:"text-xs text-foreground/70",children:[(0,r.jsx)("span",{className:"text-green-500",children:"â†‘ 4.3%"})," from last month"]})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Maintenance Requests"}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(u.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"5 Active"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"3 completed this month"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Occupancy Rate"}),(0,r.jsx)(d.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(u.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"85%"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"6 of 7 units occupied"})]})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[(0,r.jsxs)(n.Zp,{className:"col-span-4",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Financial Overview"}),(0,r.jsx)(n.BT,{children:"Revenue and expenses for the current month"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(u.EA,{className:"h-[200px] w-full"})}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Total Revenue"}),(0,r.jsx)("div",{className:"font-medium",children:"$8,750.00"})]}),(0,r.jsx)(x.k,{value:100,className:"h-2"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Expenses"}),(0,r.jsx)("div",{className:"font-medium",children:"$2,340.00"})]}),(0,r.jsx)(x.k,{value:27,className:"h-2"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-medium",children:"Maintenance"}),(0,r.jsx)("div",{className:"text-sm",children:"$850.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-medium",children:"Utilities"}),(0,r.jsx)("div",{className:"text-sm",children:"$620.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-medium",children:"Property Management"}),(0,r.jsx)("div",{className:"text-sm",children:"$570.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-medium",children:"Insurance"}),(0,r.jsx)("div",{className:"text-sm",children:"$300.00"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-t pt-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Net Income"}),(0,r.jsx)("div",{className:"font-medium text-primary",children:"$6,410.00"})]})]})})]}),(0,r.jsxs)(n.Zp,{className:"col-span-3",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Property Occupancy"}),(0,r.jsx)(n.BT,{children:"Current occupancy status"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(u.EA,{className:"h-[200px] w-full"})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{children:"Overall Occupancy"}),(0,r.jsxs)("div",{children:[t,"%"]})]}),(0,r.jsx)(x.k,{value:t,className:"h-2"})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"123 Main St"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Single Family"})]}),(0,r.jsx)("div",{className:"font-medium text-primary",children:"Occupied"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"456 Oak Ave"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Single Family"})]}),(0,r.jsx)("div",{className:"font-medium text-primary",children:"Occupied"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Sunset Apts #101"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Apartment"})]}),(0,r.jsx)("div",{className:"font-medium text-primary",children:"Occupied"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Sunset Apts #205"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Apartment"})]}),(0,r.jsx)("div",{className:"font-medium text-destructive",children:"Vacant"})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsxs)(n.Zp,{className:"col-span-1",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Recent Payments"}),(0,r.jsx)(n.BT,{children:"Latest tenant payments"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.EA,{className:"h-12 w-full"}),(0,r.jsx)(u.EA,{className:"h-12 w-full"}),(0,r.jsx)(u.EA,{className:"h-12 w-full"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"John Smith"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"May 1, 2023"})]}),(0,r.jsx)("div",{className:"font-medium",children:"$1,250.00"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Sarah Johnson"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"May 1, 2023"})]}),(0,r.jsx)("div",{className:"font-medium",children:"$950.00"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Michael Brown"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"May 2, 2023"})]}),(0,r.jsx)("div",{className:"font-medium",children:"$1,100.00"})]}),(0,r.jsx)(j(),{href:"/owner/finances",children:(0,r.jsx)(o.$,{variant:"link",className:"p-0 h-auto",children:"View all payments"})})]})})]}),(0,r.jsxs)(n.Zp,{className:"col-span-1",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Quick Actions"}),(0,r.jsx)(n.BT,{children:"Common owner tasks"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.EA,{className:"h-9 w-full"}),(0,r.jsx)(u.EA,{className:"h-9 w-full"}),(0,r.jsx)(u.EA,{className:"h-9 w-full"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(j(),{href:"/owner/properties",children:(0,r.jsxs)(o.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Manage Properties"]})}),(0,r.jsx)(j(),{href:"/owner/maintenance",children:(0,r.jsxs)(o.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"View Maintenance Requests"]})}),(0,r.jsx)(j(),{href:"/owner/tenants",children:(0,r.jsxs)(o.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Manage Tenants"]})})]})})]}),(0,r.jsxs)(n.Zp,{className:"col-span-1",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Upcoming Events"}),(0,r.jsx)(n.BT,{children:"Important dates to remember"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.EA,{className:"h-12 w-full"}),(0,r.jsx)(u.EA,{className:"h-12 w-full"}),(0,r.jsx)(u.EA,{className:"h-12 w-full"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(m.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Lease Renewal"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"123 Main St - May 15, 2023"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(m.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Property Inspection"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"456 Oak Ave - May 20, 2023"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(m.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Insurance Payment Due"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"All Properties - May 31, 2023"})]})]})]})})]})]})]})}},68122:(e,s,t)=>{"use strict";t.d(s,{EA:()=>n});var r=t(95155),a=t(25016);function n(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...t})}},79733:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(95704);let a="https://ondorealestateserver.onrender.com",n=r.env.NEXT_PUBLIC_BACKEND_BASE_URL||a;function l(e){return new URL(e.startsWith("/")?e:"/".concat(e),n||a).toString()}}},e=>{e.O(0,[2619,4909,7178,2240,8441,1255,7358],()=>e(e.s=61316)),_N_E=e.O()}]);