(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1078],{14578:(e,t,r)=>{Promise.resolve().then(r.bind(r,62725))},15239:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(54652),i=r.n(n)},54652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return s},getImageProps:function(){return o}});let n=r(28140),i=r(75040),a=r(81356),l=n._(r(71124));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!0,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let s=a.Image},56568:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var n=r(95155),i=r(12115),a=r(15239),l=r(25016);function o(e){let{src:t,alt:r,width:o,height:s,fill:c=!1,className:u,priority:d=!1,quality:m=85,sizes:f,placeholder:A="empty",blurDataURL:p,onLoad:h,onError:g,...v}=e,[y,x]=(0,i.useState)(d),[j,w]=(0,i.useState)(!1),[b,C]=(0,i.useState)(!0),N=(0,i.useRef)(null);return((0,i.useEffect)(()=>{if(d||y)return;if(!("IntersectionObserver"in window))return void x(!0);let e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(x(!0),e.disconnect())})},{rootMargin:"50px",threshold:.01}),t=N.current;return t&&e.observe(t),()=>{e.disconnect()}},[d,y]),j)?(0,n.jsx)("div",{className:(0,l.cn)("flex items-center justify-center bg-muted text-gray-400",u),style:c?void 0:{width:o,height:s},children:(0,n.jsx)("span",{className:"text-sm",children:"Image unavailable"})}):(0,n.jsxs)("div",{ref:N,className:(0,l.cn)("relative",u),children:[b&&(0,n.jsx)("div",{className:"absolute inset-0 bg-muted animate-pulse rounded",style:c?void 0:{width:o,height:s},"aria-hidden":"true"}),y?(0,n.jsx)(a.default,{src:t,alt:r,width:c?void 0:o,height:c?void 0:s,fill:c,className:(0,l.cn)("transition-opacity duration-300",b?"opacity-0":"opacity-100"),priority:d,quality:m,sizes:f,placeholder:A,blurDataURL:p||"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",onLoad:()=>{C(!1),null==h||h()},onError:()=>{C(!1),w(!0),null==g||g()},loading:d?void 0:"lazy",...v}):(0,n.jsx)("div",{className:"bg-muted animate-pulse",style:c?{width:"100%",height:"100%"}:{width:o,height:s},"aria-hidden":"true"})]})}},61883:(e,t,r)=>{"use strict";r.d(t,{C6:()=>A,CB:()=>m,c8:()=>d,ck:()=>u,iu:()=>f});var n=r(52006);let i="ondo:last-viewed-properties",a="ondo:favorites",l=[{id:"prop-001",title:"Modern Downtown Apartment",location:"Salt Lake City, UT",price:2400,bedrooms:2,propertyType:"apartment",image:"/favicon.svg",lat:40.7608,lng:-111.891,description:"Walkable downtown apartment with modern finishes and secure parking."},{id:"prop-002",title:"Family Home in Lehi",location:"Lehi, UT",price:3200,bedrooms:4,propertyType:"house",image:"/favicon.svg",lat:40.3916,lng:-111.8508,description:"Spacious home with fenced yard and strong school district access."},{id:"prop-003",title:"Townhouse Near Tech Corridor",location:"Draper, UT",price:2800,bedrooms:3,propertyType:"townhouse",image:"/favicon.svg",lat:40.5247,lng:-111.8638,description:"Contemporary townhouse with garage and quick access to I-15."}];function o(e){let t=localStorage.getItem(e);if(!t)return[];try{return JSON.parse(t)}catch(e){return[]}}function s(e,t){localStorage.setItem(e,JSON.stringify(t))}function c(e,t){return t?e.filter(e=>{let r=(void 0===t.minPrice||e.price>=t.minPrice)&&(void 0===t.maxPrice||e.price<=t.maxPrice),n=void 0===t.bedrooms||e.bedrooms>=t.bedrooms,i=!t.propertyType||"any"===t.propertyType||e.propertyType===t.propertyType,a=!t.location||e.location.toLowerCase().includes(t.location.toLowerCase().trim());return r&&n&&i&&a}):e}async function u(e){try{let t=await (0,n.d)("/api/properties/public","properties:list");return c(t,e)}catch(t){return c(l,e)}}async function d(e){var t;let r=null!=(t=(await u()).find(t=>t.id===e))?t:null;return r&&function(e){let t=o(i).filter(t=>t.id!==e.id);s(i,[e,...t].slice(0,10))}(r),r}function m(){return o(i)}function f(e){let t=new Set(o(a));t.has(e)?t.delete(e):t.add(e);let r=Array.from(t);return s(a,r),r}function A(){return o(a)}},62725:(e,t,r)=>{"use strict";r.d(t,{PropertyDetailsClientPage:()=>p});var n=r(95155),i=r(12115),a=r(83457),l=r(97003),o=r(83209),s=r(33789),c=r(90235),u=r(67001),d=r(56568),m=r(81636),f=r(61883),A=r(73659);function p(e){let{propertyId:t}=e,[r,p]=(0,i.useState)(null),[h,g]=(0,i.useState)([]),[v,y]=(0,i.useState)({fullName:"",email:"",phone:"",message:""}),[x,j]=(0,i.useState)(null),[w,b]=(0,i.useState)(!1),{isOffline:C}=(0,m.d)();(0,i.useEffect)(()=>{(0,f.c8)(t).then(p),g((0,f.C6)())},[t]);let N=(0,i.useMemo)(()=>h.includes(t),[h,t]),S=async e=>{e.preventDefault(),b(!0),j(null);try{let e=await (0,A.x)({propertyId:t,fullName:v.fullName,email:v.email,phone:v.phone,message:v.message});j(e.queued?"Inquiry saved offline. It will sync automatically when your connection is restored.":"Inquiry submitted successfully."),y({fullName:"",email:"",phone:"",message:""})}finally{b(!1)}};return r?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("header",{className:"space-y-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold",children:r.title}),(0,n.jsx)("p",{className:"text-foreground/70",children:r.location}),(0,n.jsxs)("p",{className:"text-sm text-foreground/70",children:["$",r.price.toLocaleString()," / month \xb7 ",r.bedrooms," bedrooms \xb7 ",r.propertyType]}),C?(0,n.jsx)("p",{className:"text-sm text-amber-500",children:"Offline mode active."}):null]}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsxs)(l.$,{type:"button",variant:N?"default":"outline",onClick:()=>{g((0,f.iu)(t))},children:[(0,n.jsx)(a.A,{className:"mr-2 h-4 w-4"}),N?"Saved to Favorites":"Save to Favorites"]})}),(0,n.jsxs)(o.Zp,{children:[(0,n.jsxs)(o.aR,{children:[(0,n.jsx)(o.ZB,{children:"Property Details"}),(0,n.jsx)(o.BT,{children:r.description})]}),(0,n.jsxs)(o.Wu,{children:[(0,n.jsx)(d.o,{src:r.image,alt:r.title,width:960,height:520,className:"mb-4 h-56 w-full overflow-hidden rounded-md object-cover"}),(0,n.jsx)("p",{className:"text-sm text-foreground/80",children:"This page is cached by the service worker and tracked as one of your last viewed properties."})]})]}),(0,n.jsxs)(o.Zp,{children:[(0,n.jsxs)(o.aR,{children:[(0,n.jsx)(o.ZB,{children:"Contact Agent"}),(0,n.jsx)(o.BT,{children:"Works online and offline with automatic background sync."})]}),(0,n.jsx)(o.Wu,{children:(0,n.jsxs)("form",{className:"grid gap-4",onSubmit:S,children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c.J,{htmlFor:"full-name",children:"Full Name"}),(0,n.jsx)(s.p,{id:"full-name",required:!0,value:v.fullName,onChange:e=>y(t=>({...t,fullName:e.target.value}))})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,n.jsx)(s.p,{id:"email",type:"email",required:!0,value:v.email,onChange:e=>y(t=>({...t,email:e.target.value}))})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c.J,{htmlFor:"phone",children:"Phone"}),(0,n.jsx)(s.p,{id:"phone",value:v.phone,onChange:e=>y(t=>({...t,phone:e.target.value}))})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(c.J,{htmlFor:"message",children:"Message"}),(0,n.jsx)(u.T,{id:"message",required:!0,value:v.message,onChange:e=>y(t=>({...t,message:e.target.value}))})]}),(0,n.jsx)(l.$,{type:"submit",disabled:w,children:w?"Submitting...":"Submit Inquiry"}),x?(0,n.jsx)("p",{className:"text-sm text-foreground/80",children:x}):null]})})]})]}):(0,n.jsx)("p",{className:"text-foreground/70",children:"Property not found or unavailable offline."})}},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(12115);let i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:c="",children:u,iconNode:d,...m}=e;return(0,n.createElement)("svg",{ref:t,...a,width:l,height:l,stroke:r,strokeWidth:s?24*Number(o)/Number(l):o,className:i("lucide",c),...m},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),o=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:o,...s}=r;return(0,n.createElement)(l,{ref:a,iconNode:t,className:i("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...s})});return r.displayName="".concat(e),r}},81636:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(12115);function i(){let[e,t]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if("undefined"==typeof navigator)return;t(navigator.onLine);let e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",r),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}},[]),{isOnline:e,isOffline:!e}}},83011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=r(12115);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=a(e,n)),t&&(i.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83457:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])}},e=>{e.O(0,[4909,1356,4247,8441,1255,7358],()=>e(e.s=14578)),_N_E=e.O()}]);