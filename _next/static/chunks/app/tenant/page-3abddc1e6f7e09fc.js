(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8371],{6707:(e,s,t)=>{"use strict";t.d(s,{A:()=>u,AuthProvider:()=>x});var r=t(95155),a=t(12115),n=t(20063),l=t(79733),i=t(61465);let c=(0,a.createContext)(void 0),d="ondo_auth_token",o="ondo_user_data",m=new i.v$(5,3e5);function x(e){let{children:s}=e,[t,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),j=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let e=i.Bu.getItem(d),s=i.Bu.getItem(o);if(e&&s)try{let t=JSON.parse(s);await f(e)?x({...t,token:e}):(i.Bu.removeItem(d),i.Bu.removeItem(o))}catch(e){i.Bu.removeItem(d),i.Bu.removeItem(o)}h(!1)})()},[]);let f=async e=>{try{let s=await fetch((0,l.E)("/api/auth/verify"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!s.ok)return await s.json().catch(()=>({})),!1;return!0}catch(e){return!1}},p=async()=>{let e=i.Bu.getItem(d);if(!e)return!1;try{let s=await fetch((0,l.E)("/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();if(e.token){let s=i.Bu.setItem(d,e.token);return s&&t&&x({...t,token:e.token}),s}}return!1}catch(e){return!1}},g=async(e,s,t)=>{h(!0);try{if(!m.isAllowed("login-attempts"))return h(!1),{success:!1,error:"Too many login attempts. Please wait 5 minutes before trying again."};let r=(0,i.o2)(e);if(!r||!s||!t)return h(!1),{success:!1,error:"Email, password, and role are required"};if(!(0,i.B9)(r))return h(!1),{success:!1,error:"Please enter a valid email address"};if(s.length<8)return h(!1),{success:!1,error:"Password must be at least 8 characters long"};let a=await fetch((0,l.E)("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.toLowerCase(),password:s,role:t})}),n=await a.json();if(!a.ok){h(!1);let e=(null==n?void 0:n.message)||(null==n?void 0:n.error)||"Login failed (".concat(a.status,")");return{success:!1,error:e}}if(!n.token||!n.user)return h(!1),{success:!1,error:"Invalid response from server"};{let e=i.Bu.setItem(d,n.token),s=i.Bu.setItem(o,JSON.stringify(n.user));if(!e||!s)return h(!1),{success:!1,error:"Failed to securely store session data"};return x({...n.user,token:n.token}),h(!1),m.reset("login-attempts"),{success:!0}}}catch(e){return h(!1),{success:!1,error:e instanceof Error?e.message:"Network error occurred"}}};return(0,r.jsx)(c.Provider,{value:{user:t,login:g,logout:()=>{x(null),i.Bu.removeItem(d),i.Bu.removeItem(o),j.push("/")},isLoading:u,refreshToken:p},children:s})}let u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},61465:(e,s,t)=>{"use strict";function r(e){return"string"!=typeof e?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"").replace(/on\w+="[^"]*"/gi,"").replace(/on\w+='[^']*'/gi,"").trim()}function a(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function n(e){return/^\d{5}(-\d{4})?$/.test(e.trim())}t.d(s,{B9:()=>a,Bu:()=>l,TV:()=>n,o2:()=>r,v$:()=>i});class l{static setItem(e,s){try{if(!window.localStorage)return!1;let t="__storage_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),localStorage.setItem(e,s),!0}catch(e){return!1}}static getItem(e){try{if(!window.localStorage)return null;return localStorage.getItem(e)}catch(e){return null}}static removeItem(e){try{if(!window.localStorage)return!1;return localStorage.removeItem(e),!0}catch(e){return!1}}}class i{isAllowed(e){let s=Date.now(),t=(this.attempts.get(e)||[]).filter(e=>s-e<this.windowMs);return!(t.length>=this.maxAttempts)&&(t.push(s),this.attempts.set(e,t),!0)}reset(e){this.attempts.delete(e)}constructor(e=5,s=6e4){this.attempts=new Map,this.maxAttempts=e,this.windowMs=s}}},67812:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var r=t(95155);t(12115);var a=t(83101),n=t(25016);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...a})}},68122:(e,s,t)=>{"use strict";t.d(s,{EA:()=>n});var r=t(95155),a=t(25016);function n(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...t})}},79733:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(95704);let a="https://ondorealestateserver.onrender.com",n=r.env.NEXT_PUBLIC_BACKEND_BASE_URL||a;function l(e){return new URL(e.startsWith("/")?e:"/".concat(e),n||a).toString()}},79803:(e,s,t)=>{Promise.resolve().then(t.bind(t,85283))},85283:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(95155),a=t(12115),n=t(83209),l=t(91761),i=t(89715),c=t(56835),d=t(37586),o=t(16485),m=t(97003),x=t(68122),u=t(52619),h=t.n(u),j=t(30224),f=t(6707),p=t(67812),g=t(11559),N=t(9852),v=t(40932);function w(){let[e,s]=(0,a.useState)(!0),{user:t}=(0,f.A)();return(0,a.useEffect)(()=>{let e=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(e)},[]),(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:p-8",children:[(0,r.jsx)(g.default,{title:"Tenant Dashboard | Ondo Real Estate",description:"Manage your rental, payments, maintenance requests, and messages in the Ondo tenant portal.",pathname:"/tenant",image:"".concat(v.W6,"/modern-apartment-balcony.png"),jsonLd:[(0,N.FG)([{name:"Home",url:v.W6},{name:"Tenant",url:"".concat(v.W6,"/tenant")}]),(0,N.XD)({name:"Tenant Dashboard",url:"".concat(v.W6,"/tenant"),description:"Tenant portal for payments, maintenance, and messages."})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(j.Qp,{className:"mb-4",children:(0,r.jsxs)(j.AB,{children:[(0,r.jsx)(j.J5,{children:(0,r.jsx)(j.w1,{href:"/",children:"Home"})}),(0,r.jsx)(j.tH,{}),(0,r.jsx)(j.J5,{children:(0,r.jsx)(j.tJ,{children:"Tenant Dashboard"})})]})})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome, ",(null==t?void 0:t.name)||"Tenant"]}),(0,r.jsx)("p",{className:"text-foreground/70",children:"Manage your rental and payments"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"text-sm text-foreground/70",children:"Last login: Today, 9:45 AM"})})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Next Rent Due"}),(0,r.jsx)(l.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(x.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"$1,250.00"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"Due on June 1, 2023"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Lease Status"}),(0,r.jsx)(i.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(x.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Active"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"Expires on Dec 31, 2023"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Maintenance Requests"}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(x.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"2 Active"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"1 completed this month"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Messages"}),(0,r.jsx)(d.A,{className:"h-4 w-4 text-foreground/70"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)(x.EA,{className:"h-7 w-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"3 Unread"}),(0,r.jsx)("p",{className:"text-xs text-foreground/70",children:"From property manager"})]})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsxs)(n.Zp,{className:"col-span-1 lg:col-span-2",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Your Property"}),(0,r.jsx)(n.BT,{children:"Details about your rental"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(x.EA,{className:"h-[200px] w-full"})}):(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"relative w-full md:w-1/3 h-48 bg-muted rounded-md overflow-hidden",children:(0,r.jsx)("img",{src:"/modern-apartment-balcony.png",alt:"Modern apartment building with balcony in Salt Lake City representing quality rental properties",className:"object-cover w-full h-full",style:{objectFit:"cover"},loading:"lazy",sizes:"(max-width: 768px) 100vw, 33vw"})}),(0,r.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:"2701 N Thanksgiving Way, Apt 4B"}),(0,r.jsx)("p",{className:"text-foreground/70",children:"Lehi, UT 84043"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Bedrooms"}),(0,r.jsx)("p",{className:"font-medium",children:"2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Bathrooms"}),(0,r.jsx)("p",{className:"font-medium",children:"1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Square Feet"}),(0,r.jsx)("p",{className:"font-medium",children:"950"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Parking"}),(0,r.jsx)("p",{className:"font-medium",children:"1 Space (#15)"})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(h(),{href:"/tenant/property",children:(0,r.jsx)(m.$,{variant:"outline",size:"sm",children:"View Property Details"})})})]})]})})})]}),(0,r.jsxs)(n.Zp,{className:"col-span-1",children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Quick Actions"}),(0,r.jsx)(n.BT,{children:"Common tenant tasks"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.EA,{className:"h-9 w-full"}),(0,r.jsx)(x.EA,{className:"h-9 w-full"}),(0,r.jsx)(x.EA,{className:"h-9 w-full"}),(0,r.jsx)(x.EA,{className:"h-9 w-full"})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(h(),{href:"/tenant/payments",children:(0,r.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Make a Payment"]})}),(0,r.jsx)(h(),{href:"/tenant/maintenance/new",children:(0,r.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Submit Maintenance Request"]})}),(0,r.jsx)(h(),{href:"/tenant/documents",children:(0,r.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"View Documents"]})}),(0,r.jsx)(h(),{href:"/tenant/messages",children:(0,r.jsxs)(m.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Messages"]})})]})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Maintenance Requests"}),(0,r.jsx)(n.BT,{children:"Your recent maintenance issues"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.EA,{className:"h-16 w-full"}),(0,r.jsx)(x.EA,{className:"h-16 w-full"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-muted/50 rounded-lg",children:[(0,r.jsx)("div",{className:"bg-muted p-2 rounded",children:(0,r.jsx)(c.A,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Leaking Kitchen Faucet"}),(0,r.jsx)(p.E,{className:"w-fit mt-1 sm:mt-0 bg-muted text-foreground hover:bg-muted",children:"In Progress"})]}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Submitted: May 3, 2023"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"Scheduled repair: May 15, 2023"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-muted/50 rounded-lg",children:[(0,r.jsx)("div",{className:"bg-yellow-100 p-2 rounded",children:(0,r.jsx)(c.A,{className:"h-5 w-5 text-yellow-700"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Bathroom Light Fixture"}),(0,r.jsx)(p.E,{className:"w-fit mt-1 sm:mt-0 bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Pending"})]}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"Submitted: May 10, 2023"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"Awaiting scheduling"})]})]})]})}),(0,r.jsx)(n.wL,{children:(0,r.jsx)(h(),{href:"/tenant/maintenance",className:"w-full",children:(0,r.jsx)(m.$,{variant:"outline",className:"w-full",children:"View All Requests"})})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Payment History"}),(0,r.jsx)(n.BT,{children:"Your recent payments"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.EA,{className:"h-16 w-full"}),(0,r.jsx)(x.EA,{className:"h-16 w-full"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center p-3 bg-muted/50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"May 1, 2023"}),(0,r.jsx)("div",{className:"text-xs text-foreground/70",children:"Monthly Rent"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("div",{className:"text-sm",children:"123 Main St, Apt 4B"}),(0,r.jsx)("div",{className:"text-xs text-foreground/70",children:"Payment #12458"})]}),(0,r.jsx)("div",{className:"text-sm font-medium",children:"$1,250.00"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center p-3 bg-muted/50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"April 1, 2023"}),(0,r.jsx)("div",{className:"text-xs text-foreground/70",children:"Monthly Rent"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("div",{className:"text-sm",children:"123 Main St, Apt 4B"}),(0,r.jsx)("div",{className:"text-xs text-foreground/70",children:"Payment #12345"})]}),(0,r.jsx)("div",{className:"text-sm font-medium",children:"$1,250.00"})]})]})}),(0,r.jsx)(n.wL,{children:(0,r.jsx)(h(),{href:"/tenant/payments",className:"w-full",children:(0,r.jsx)(m.$,{variant:"outline",className:"w-full",children:"View All Payments"})})})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Upcoming Events"}),(0,r.jsx)(n.BT,{children:"Important dates to remember"})]}),(0,r.jsx)(n.Wu,{children:e?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(x.EA,{className:"h-12 w-full"}),(0,r.jsx)(x.EA,{className:"h-12 w-full"}),(0,r.jsx)(x.EA,{className:"h-12 w-full"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(o.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Rent Due"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"June 1, 2023"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(o.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Maintenance Visit"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"May 15, 2023 - Kitchen Faucet Repair"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(o.A,{className:"mt-1 h-5 w-5 text-foreground/70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Building Inspection"}),(0,r.jsx)("p",{className:"text-sm text-foreground/70",children:"May 25, 2023 - 10:00 AM to 2:00 PM"})]})]})]})})]})]})}}},e=>{e.O(0,[2619,4909,6734,2240,8441,1255,7358],()=>e(e.s=79803)),_N_E=e.O()}]);